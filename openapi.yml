openapi: 3.0.0
info:
  title: Hack4Vilnius 2025 Backend API
  description: Backend server API with Express, TypeScript, and TypeORM using modularized monolith architecture
  version: 1.0.0
servers:
  - url: http://localhost:3000
    description: Local development server

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

paths:
  /health:
    get:
      summary: Health check
      description: Check if the server is running
      tags:
        - System
      responses:
        '200':
          description: Server is running
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  message:
                    type: string
                    example: Server is running

  /api/auth/register:
    post:
      summary: Register new user
      description: Create a new user account
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - name
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  example: password123
                name:
                  type: string
                  example: John Doe
                address:
                  type: string
                  nullable: true
                  example: 123 Main St
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  email:
                    type: string
                    example: user@example.com
                  name:
                    type: string
                    example: John Doe
                  address:
                    type: string
                    nullable: true
                    example: 123 Main St
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
        '400':
          description: Bad request - Missing required fields or user already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required fields
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/auth/login:
    post:
      summary: Login user
      description: Authenticate user and receive JWT access token
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  example: password123
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                    example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        '400':
          description: Bad request - Missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required fields
        '401':
          description: Unauthorized - Invalid credentials
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Invalid email or password
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/users:
    get:
      summary: Get user profile
      description: Get authenticated user's profile information
      tags:
        - Users
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  email:
                    type: string
                    example: user@example.com
                  name:
                    type: string
                    example: John Doe
                  address:
                    type: string
                    nullable: true
                    example: 123 Main St
                  image:
                    type: string
                    nullable: true
                    example: https://example.com/avatar.jpg
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
                  updatedAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: User not found
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: No token provided
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error
    put:
      summary: Update user profile
      description: Update authenticated user's profile information
      tags:
        - Users
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: John Doe Updated
                address:
                  type: string
                  example: 456 New Street
                image:
                  type: string
                  example: https://example.com/avatar.jpg
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  email:
                    type: string
                    example: user@example.com
                  name:
                    type: string
                    example: John Doe Updated
                  address:
                    type: string
                    nullable: true
                    example: 456 New Street
                  image:
                    type: string
                    nullable: true
                    example: https://example.com/avatar.jpg
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
                  updatedAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T14:30:00.000Z
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: User not found
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: No token provided
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error
    patch:
      summary: Partially update user profile
      description: Partially update authenticated user's profile information
      tags:
        - Users
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: John Doe Updated
                address:
                  type: string
                  example: 456 New Street
                image:
                  type: string
                  example: https://example.com/avatar.jpg
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  email:
                    type: string
                    example: user@example.com
                  name:
                    type: string
                    example: John Doe Updated
                  address:
                    type: string
                    nullable: true
                    example: 456 New Street
                  image:
                    type: string
                    nullable: true
                    example: https://example.com/avatar.jpg
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
                  updatedAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T14:30:00.000Z
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: User not found
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: No token provided
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/users/:
    delete:
      summary: Soft delete user
      description: Soft delete the authenticated user's account (marks as deleted without permanently removing data)
      tags:
        - Users
      security:
        - BearerAuth: []
      responses:
        '204':
          description: User soft deleted successfully
        '400':
          description: Bad request - User not found
  /api/forums:
    get:
      summary: Get paginated forums
      description: Retrieve a paginated list of forums with approval counts
      tags:
        - Forums
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
            minimum: 1
          description: Page number for pagination
          example: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
          description: Number of items per page (max 100)
          example: 10
      responses:
        '200':
          description: Forums retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  forums:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: string
                          format: uuid
                          example: 770e8400-e29b-41d4-a716-446655440002
                        userCode:
                          type: string
                          format: uuid
                          example: 660e8400-e29b-41d4-a716-446655440001
                        userName:
                          type: string
                          example: John Doe
                        userImage:
                          type: string
                          nullable: true
                          example: https://example.com/avatar.jpg
                        title:
                          type: string
                          example: My Forum Title
                        body:
                          type: string
                          example: This is the forum content
                        address:
                          type: string
                          nullable: true
                          example: 123 Main Street, Vilnius
                        language:
                          type: string
                          enum: [EN, LT]
                          example: EN
                        createdAt:
                          type: string
                          format: date-time
                          example: 2025-10-18T10:30:00.000Z
                        approvalCount:
                          type: integer
                          example: 5
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      totalItems:
                        type: integer
                        example: 25
                      totalPages:
                        type: integer
                        example: 3
                      hasNextPage:
                        type: boolean
                        example: true
                      hasPreviousPage:
                        type: boolean
                        example: false
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Error retrieving forums
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error
    post:
      summary: Create new forum
      description: Create a new forum post
      tags:
        - Forums
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - body
              properties:
                title:
                  type: string
                  example: My Forum Title
                body:
                  type: string
                  example: This is the forum content
                address:
                  type: string
                  nullable: true
                  example: 123 Main Street, Vilnius
                language:
                  type: string
                  enum: [EN, LT]
                  example: EN
                  description: Forum language (EN or LT)
      responses:
        '201':
          description: Forum created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 770e8400-e29b-41d4-a716-446655440002
                  userCode:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  title:
                    type: string
                    example: My Forum Title
                  body:
                    type: string
                    example: This is the forum content
                  address:
                    type: string
                    nullable: true
                    example: 123 Main Street, Vilnius
                  language:
                    type: string
                    enum: [EN, LT]
                    example: EN
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
        '400':
          description: Bad request - Missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: User not found
        '401':
          description: Unauthorized - No token provided
                    example: Missing required fields
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: No token provided
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/forums/{code}:
    get:
      summary: Get forum by code
      description: Retrieve a specific forum post by its unique code
      tags:
        - Forums
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the forum to retrieve
          example: 770e8400-e29b-41d4-a716-446655440002
      responses:
        '200':
          description: Forum retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 770e8400-e29b-41d4-a716-446655440002
                  userCode:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  userName:
                    type: string
                    example: John Doe
                  userImage:
                    type: string
                    nullable: true
                    example: https://example.com/avatar.jpg
                  title:
                    type: string
                    example: My Forum Title
                  body:
                    type: string
                    example: This is the forum content
                  address:
                    type: string
                    nullable: true
                    example: 123 Main Street, Vilnius
                  language:
                    type: string
                    enum: [EN, LT]
                    example: EN
                  approvalCount:
                    type: integer
                    example: 5
                    description: Number of approvals this forum has received
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
                  updatedAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T14:30:00.000Z
        '400':
          description: Bad request - Missing required parameter
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required parameter: code
        '404':
          description: Not found - Forum does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Forum not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/forums/{forumCode}:
    patch:
      summary: Update forum
      description: Update an existing forum post (only by owner)
      tags:
        - Forums
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the forum to update
          example: 770e8400-e29b-41d4-a716-446655440002
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  example: Updated Forum Title
                body:
                  type: string
                  example: Updated forum content
                address:
                  type: string
                  nullable: true
                  example: 456 New Street, Vilnius
                language:
                  type: string
                  enum: [EN, LT]
                  example: EN
                  description: Forum language (EN or LT)
      responses:
        '200':
          description: Forum updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 770e8400-e29b-41d4-a716-446655440002
                  userCode:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  title:
                    type: string
                    example: Updated Forum Title
                  body:
                    type: string
                    example: Updated forum content
                  address:
                    type: string
                    nullable: true
                    example: 456 New Street, Vilnius
                  language:
                    type: string
                    enum: [EN, LT]
                    example: EN
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
                  updatedAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T14:30:00.000Z
        '400':
          description: Bad request - Missing required fields or validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: At least one field (title, body, address, or language) must be provided for update
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '403':
          description: Forbidden - Only the creator can update this forum
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Only the creator can update this forum
        '404':
          description: Not found - Forum does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Forum not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

    delete:
      summary: Delete forum
      description: Delete a forum post (only by owner)
      tags:
        - Forums
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the forum to delete
          example: 770e8400-e29b-41d4-a716-446655440002
      responses:
        '200':
          description: Forum deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Forum deleted successfully
        '400':
          description: Bad request - Missing required parameter
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required parameter: code
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '403':
          description: Forbidden - User can only delete their own forums
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: 'Unauthorized: You can only delete your own forums'
        '404':
          description: Not found - Forum does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Forum not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/forums/{forumCode}/approvals:
    post:
      summary: Create forum approval
      description: Create a forum approval by approving a forum post
      tags:
        - Forum Approvals
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: forumCode
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the forum to approve
          example: 770e8400-e29b-41d4-a716-446655440002
      responses:
        '201':
          description: Forum approval created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  userCode:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  forumCode:
                    type: string
                    format: uuid
                    example: 770e8400-e29b-41d4-a716-446655440002
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
        '400':
          description: Bad request - Missing required parameter
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required parameter: forumCode

    delete:
      summary: Delete forum approval
      description: Remove a forum approval (unapprove a forum post)
      tags:
        - Forum Approvals
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: forumCode
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the forum to unapprove
          example: 770e8400-e29b-41d4-a716-446655440002
      responses:
        '204':
          description: Forum approval deleted successfully
        '400':
          description: Bad request - Missing required parameter
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required parameter: forumCode
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '404':
          description: Not found - Forum, user, or approval does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Forum approval not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/forums/{forumCode}/comments:
    get:
      summary: Get comments for forum
      description: Retrieve all comments for a specific forum post
      tags:
        - Comments
      parameters:
        - in: path
          name: forumCode
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the forum to get comments for
          example: 770e8400-e29b-41d4-a716-446655440002
      responses:
        '200':
          description: Comments retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    code:
                      type: string
                      format: uuid
                      example: 880e8400-e29b-41d4-a716-446655440003
                    userCode:
                      type: string
                      format: uuid
                      example: 660e8400-e29b-41d4-a716-446655440001
                    userName:
                      type: string
                      example: John Doe
                    userImage:
                      type: string
                      nullable: true
                      example: https://example.com/avatar.jpg
                    commentText:
                      type: string
                      example: This is a great forum post!
                    createdAt:
                      type: string
                      format: date-time
                      example: 2025-10-19T10:30:00.000Z
                    updatedAt:
                      type: string
                      format: date-time
                      example: 2025-10-19T10:30:00.000Z
        '400':
          description: Bad request - Missing required parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required parameter: forumCode
        '404':
          description: Not found - Forum does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Forum not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error
    post:
      summary: Create comment on forum
      description: Add a comment to a specific forum post
      tags:
        - Comments
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: forumCode
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the forum to comment on
          example: 770e8400-e29b-41d4-a716-446655440002
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - commentText
              properties:
                commentText:
                  type: string
                  example: This is a great forum post!
      responses:
        '201':
          description: Comment created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 880e8400-e29b-41d4-a716-446655440003
                  userCode:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  forumCode:
                    type: string
                    format: uuid
                    example: 770e8400-e29b-41d4-a716-446655440002
                  commentText:
                    type: string
                    example: This is a great forum post!
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-19T10:30:00.000Z
        '400':
          description: Bad request - Missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required field: commentText
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '404':
          description: Not found - Forum or user does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Forum not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/forums/comments/{commentCode}:
    patch:
      summary: Update comment
      description: Update a comment text (only by the creator)
      tags:
        - Comments
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: commentCode
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the comment to update
          example: 880e8400-e29b-41d4-a716-446655440003
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - commentText
              properties:
                commentText:
                  type: string
                  example: This is my updated comment!
      responses:
        '200':
          description: Comment updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 880e8400-e29b-41d4-a716-446655440003
                  userCode:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  commentText:
                    type: string
                    example: This is my updated comment!
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-19T10:30:00.000Z
                  updatedAt:
                    type: string
                    format: date-time
                    example: 2025-10-19T11:15:00.000Z
        '400':
          description: Bad request - Missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required field: commentText
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '403':
          description: Forbidden - Only comment creator can update
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized to update this comment
        '404':
          description: Not found - Comment does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Comment not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error
    delete:
      summary: Delete comment
      description: Delete a comment (only by the creator)
      tags:
        - Comments
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: commentCode
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the comment to delete
          example: 880e8400-e29b-41d4-a716-446655440003
      responses:
        '204':
          description: Comment deleted successfully
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '403':
          description: Forbidden - Only comment creator can delete
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized to delete this comment
        '404':
          description: Not found - Comment does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Comment not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/users/forums:
    get:
      summary: Get current user's forums
      description: Retrieve all forum posts created by the authenticated user
      tags:
        - Forums
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Forums retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    code:
                      type: string
                      format: uuid
                      example: 770e8400-e29b-41d4-a716-446655440002
                    userCode:
                      type: string
                      format: uuid
                      example: 660e8400-e29b-41d4-a716-446655440001
                    userName:
                      type: string
                      example: John Doe
                    userImage:
                      type: string
                      nullable: true
                      example: https://example.com/avatar.jpg
                    title:
                      type: string
                      example: My Forum Title
                    body:
                      type: string
                      example: This is the forum content
                    address:
                      type: string
                      nullable: true
                      example: 123 Main Street, Vilnius
                    language:
                      type: string
                      enum: [EN, LT]
                      example: EN
                    approvalCount:
                      type: integer
                      example: 5
                      description: Number of approvals this forum has received
                    createdAt:
                      type: string
                      format: date-time
                      example: 2025-10-18T10:30:00.000Z
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '403':
          description: Forbidden - Cannot approve own forum
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Cannot approve your own forum
        '404':
          description: Not found - Forum or user does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Forum not found
        '409':
          description: Conflict - Forum already approved by this user
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Forum already approved by this user
                    example: Error retrieving forums
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/petitions:
    get:
      summary: Get paginated petitions
      description: Retrieve a paginated list of petitions with approval counts
      tags:
        - Petitions
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
            minimum: 1
          description: Page number for pagination
          example: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
          description: Number of items per page (max 100)
          example: 10
      responses:
        '200':
          description: Petitions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  petitions:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: string
                          format: uuid
                          example: 880e8400-e29b-41d4-a716-446655440004
                        userCode:
                          type: string
                          format: uuid
                          example: 660e8400-e29b-41d4-a716-446655440001
                        userName:
                          type: string
                          example: John Doe
                        userImage:
                          type: string
                          nullable: true
                          example: https://example.com/avatar.jpg
                        name:
                          type: string
                          example: Fix Neighborhood Park
                        description:
                          type: string
                          example: We need to repair the playground equipment
                        address:
                          type: string
                          nullable: true
                          example: Park Street 15, Vilnius
                        createdAt:
                          type: string
                          format: date-time
                          example: 2025-10-18T10:30:00.000Z
                        approvalCount:
                          type: integer
                          example: 5
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      totalItems:
                        type: integer
                        example: 25
                      totalPages:
                        type: integer
                        example: 3
                      hasNextPage:
                        type: boolean
                        example: true
                      hasPreviousPage:
                        type: boolean
                        example: false
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Error retrieving petitions
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error
    post:
      summary: Create new petition
      description: Create a new petition
      tags:
        - Petitions
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - description
              properties:
                name:
                  type: string
                  example: Fix Neighborhood Park
                description:
                  type: string
                  example: We need to repair the playground equipment and add new benches
                address:
                  type: string
                  nullable: true
                  example: Park Street 15, Vilnius
      responses:
        '201':
          description: Petition created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 880e8400-e29b-41d4-a716-446655440004
                  userCode:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  name:
                    type: string
                    example: Fix Neighborhood Park
                  description:
                    type: string
                    example: We need to repair the playground equipment and add new benches
                  address:
                    type: string
                    nullable: true
                    example: Park Street 15, Vilnius
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
        '400':
          description: Bad request - Missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required fields: name, description
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/petitions/{code}:
    patch:
      summary: Update petition
      description: Update an existing petition (only by creator)
      tags:
        - Petitions
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the petition to update
          example: 880e8400-e29b-41d4-a716-446655440004
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Updated Petition Name
                description:
                  type: string
                  example: Updated petition description
                address:
                  type: string
                  nullable: true
                  example: Updated Street 20, Vilnius
      responses:
        '200':
          description: Petition updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    format: uuid
                    example: 880e8400-e29b-41d4-a716-446655440004
                  userCode:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  name:
                    type: string
                    example: Updated Petition Name
                  description:
                    type: string
                    example: Updated petition description
                  address:
                    type: string
                    nullable: true
                    example: Updated Street 20, Vilnius
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
                  updatedAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T14:30:00.000Z
        '400':
          description: Bad request - Missing required fields or validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: At least one field (name, description, or address) must be provided for update
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '403':
          description: Forbidden - Only the creator can update this petition
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Only the creator can update this petition
        '404':
          description: Not found - Petition does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Petition not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

    delete:
      summary: Delete petition
      description: Delete a petition (only by creator)
      tags:
        - Petitions
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the petition to delete
          example: 880e8400-e29b-41d4-a716-446655440004
      responses:
        '204':
          description: Petition deleted successfully (no content)
        '400':
          description: Bad request - Missing required parameter
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required parameter: code
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '403':
          description: Forbidden - User can only delete their own petitions
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: 'Unauthorized: You can only delete your own petitions'
        '404':
          description: Not found - Petition does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Petition not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

  /api/agent/generate:
    post:
      summary: Generate LLM response
      description: Generate AI response using latest Gemini models (2.5 Flash, 2.0 Flash, etc.) with backend-configured context
      tags:
        - Agent
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - prompt
              properties:
                prompt:
                  type: string
                  example: What are the benefits of renewable energy?
      responses:
        '200':
          description: LLM response generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
                    example: Renewable energy offers numerous benefits including reduced carbon emissions, energy independence, and long-term cost savings...
                  timestamp:
                    type: string
                    format: date-time
                    example: 2025-10-19T12:00:00.000Z
        '400':
          description: Bad request - Missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required field: prompt
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '500':
          description: Internal server error or AI service not configured
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: AI service not configured

  /api/petitions/{petitionCode}/approvals:
    post:
      summary: Create petition approval
      description: Approve a petition post
      tags:
        - Petition Approvals
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: petitionCode
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the petition to approve
          example: 880e8400-e29b-41d4-a716-446655440004
      responses:
        '201':
          description: Petition approval created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  userCode:
                    type: string
                    format: uuid
                    example: 660e8400-e29b-41d4-a716-446655440001
                  petitionCode:
                    type: string
                    format: uuid
                    example: 880e8400-e29b-41d4-a716-446655440004
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-10-18T10:30:00.000Z
        '400':
          description: Bad request - Missing required parameter
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required parameter: petitionCode
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '403':
          description: Forbidden - Cannot approve own petition
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Cannot approve your own petition
        '404':
          description: Not found - Petition or user does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Petition not found
        '409':
          description: Conflict - Petition already approved by this user
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Petition already approved by this user
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

    delete:
      summary: Delete petition approval
      description: Remove a petition approval (unapprove a petition)
      tags:
        - Petition Approvals
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: petitionCode
          required: true
          schema:
            type: string
            format: uuid
          description: The unique code of the petition to unapprove
          example: 880e8400-e29b-41d4-a716-446655440004
      responses:
        '204':
          description: Petition approval deleted successfully
        '400':
          description: Bad request - Missing required parameter
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required parameter: petitionCode
        '401':
          description: Unauthorized - No token provided
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized
        '404':
          description: Not found - Petition, user, or approval does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Petition approval not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

tags:
  - name: System
    description: System health and status endpoints
  - name: Authentication
    description: User authentication and registration endpoints
  - name: Users
    description: User management endpoints
  - name: Forums
    description: Forum management endpoints
  - name: Forum Approvals
    description: Forum approval management endpoints
  - name: Comments
    description: Forum comment management endpoints
  - name: Petitions
    description: Petition management endpoints
  - name: Petition Approvals
    description: Petition approval management endpoints
  - name: Agent
    description: AI agent endpoints for LLM responses

